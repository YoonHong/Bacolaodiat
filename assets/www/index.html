<!DOCTYPE html> 
<html> 
<head> 
	<title>Bacoloadiat 2013</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.2.0.min.css" />
	
	<style type="text/css">

		#pVE_title {
			padding-bottom: 10px;
			font-weight: bold;
			text-align: center;
			color: #00ccff;
			font-size: 20px;
		}

		#pVE_time {
			padding: 10px 0;
			border-top: 1px solid #CCC;
			border-bottom: 1px dashed #CCC;
			color: #006600
		}

		#pVE_place {
			padding: 10px 0;
			border-bottom: 1px dashed #CCC;
			color: #6666ff
		}

		#pVE_detail {
			padding: 10px 0;
			border-bottom: 1px solid #CCC;
			color: #373737
		}

	</style>


	<script src="js/jquery-1.8.2.min.js"></script>

	<script>

/****************************************************************
			Event Object
****************************************************************/
		function Obj_Event(time, title, place, detail){
			this.time = time;
		    this.title = title;
			this.place = place;
			this.detail = detail;
		}

		Obj_Event.prototype = {
			constructor: Obj_Event
		};


/****************************************************************
			Place Object
****************************************************************/
		function Obj_Place(name, addr, latlng, path){
			this.name = name;
			this.addr = addr;
			this.latlng = latlng;
			this.path = path;
			
		}

		Obj_Place.prototype = {
			constructor: Obj_Place
		};


/****************************************************************
			Event UI Object
****************************************************************/
		function Obj_EventUI ( ) {

			// Index for Current Date
			this.idx = 0;
			
			// Event List
			this.$eList = $("#pScheList");	
			
			// Date Choice Buttons
			this.$lBtn = $("#pScheLBtn");
			this.$cBtn = $("#pScheCBtn");
			this.$rBtn = $("#pScheRBtn");

			
			this.init();

		}

		Obj_EventUI.prototype = {
			constructor: Obj_EventUI

			, init : function(){

				// Attach Events
				this.$rBtn.on("click", { type : "R", objEUI : this }, this.clickArrowBtn);
				this.$lBtn.on("click", { type : "L", objEUI : this }, this.clickArrowBtn);

				this.$eList.on("click", "a", { objEUI : this }, function( e ){
				// Move to View Event Page

					var di = e.data.objEUI.idx;   // Date Index
					var ei = $(this).data("idx"); // Event Index from selected list item
					gObj_ViewEvent = new Obj_ViewEvent( di , ei );

				});		

				this.showList();
				this.updateButtons( );

			}

			, updateButtons : function( ) {

				var eDate = gArr_Date[this.idx];

				var txtDate = eDate.getDate() + " " + gArr_sMonth[eDate.getMonth()];

				this.$cBtn.text(txtDate).button('refresh');


				// Set Left Button
				if ( this.idx == 0 ) {
					
					// Hide Left Button
					
					this.$lBtn.parent().hide();
				
				} else {
					
					// Set Day on Left Button
					
					this.$lBtn.parent().show();

					var d = gArr_Date[this.idx - 1];
					this.$lBtn.text( d.getDate() ).button('refresh');

				}

				// Set Righ Button
				if ( this.idx == gArr_Date.length - 1 ) {
					
					// Hide Right Button
					
					this.$rBtn.parent().hide();
				
				} else {
					
					// Set Day on Right Button
					
					this.$rBtn.parent().show();

					var d = gArr_Date[this.idx + 1];
					this.$rBtn.text( d.getDate() ).button('refresh');

				}

			} // updateButtons

			, showList : function(){

				var evts = gArr_event[this.idx];
				var evtsSize = evts.length;

				var eDate = gArr_Date[this.idx];
				var eDateTxt = gArr_sWeekDay[eDate.getDay()] + ", " + eDate.getDate() + " " + gArr_month[eDate.getMonth()] + ", " + eDate.getFullYear();

				var txt = '<li data-role="list-divider"><h3 class="ui-li-heading">' + eDateTxt + '</h3><span class="ui-li-count">' + evtsSize + '</span></li>';

				for( var i = 0; i < evtsSize; i++) {
					var cEvt = evts[i];

					var time_place = cEvt.time + " @ " + gArr_place[evts[i].place].name;

					txt += '<li><a data-idx="' + i + '" href="viewEvent.html">';
					txt += '<img src="img/star.png" class="ui-li-icon" />';
					txt += '<h3 class="ui-li-heading">' + cEvt.title + '</h3>';
					txt += '<p class="ui-li-desc">' + time_place + '</p></a></li>';
				}

				this.$eList.html(txt).listview('refresh');
			} // showList

			, clickArrowBtn : function ( e ) {

				var objEUI = e.data.objEUI;
				var type = e.data.type;

				if ( type === "R") {
					objEUI.idx++;
				} else {
					objEUI.idx--;
				}

				objEUI.updateButtons();
				objEUI.showList();
 
			} // clickArrowBtn

		}; 	// Obj_EventUI.prototype 


/****************************************************************
			ViewEvent Object
****************************************************************/
		function Obj_ViewEvent( dIdx , eIdx ){  // dIdx : date Index, eIdx : event Index

			this.di = dIdx;
			this.ei = eIdx;

		}

		Obj_ViewEvent.prototype = {
			constructor: Obj_ViewEvent

			, showPage : function ( ) {
				
				var sEvt = gArr_event[this.di][this.ei];

				var place = gArr_place[ sEvt.place ];

				var eDate = gArr_Date[this.di];
				var eDateTxt = gArr_sWeekDay[eDate.getDay()] + ", " + eDate.getDate() + " " + gArr_month[eDate.getMonth()] + ", " + eDate.getFullYear();

				$("#pVE_title_txt").text( sEvt.title );
				$("#pVE_time_txt").text( sEvt.time );
				$("#pVE_date_txt").text( eDateTxt );
				$("#pVE_place_txt").text( place.name );
				$("#pVE_addr").text( place.addr );
				$("#pVE_detail").text( sEvt.detail );

			}
		};


/******************************************************************************************
			Global Var
*******************************************************************************************/
		// Arrays
		var gArr_place;		// For Places
		var gArr_Date;		// For Dates for Events
		var gArr_event = [];		// For Events
		
		// Objects
		var gObj_Event;		// Main Event Object
		var gObj_ViewEvent; // ViewEvent Object

		// Index for Place
		var gIdx_pNorthCapitol = 0;

		
		// Init Day & Month Array
		var gArr_weekDay = [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ];
		var gArr_sWeekDay = [ "Sun", "Mon", "Tue", "Wen", "Thu", "Fri", "Sat" ];
		var	gArr_month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "Decmber"];
		var	gArr_sMonth = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];



/******************************************************************************************
			Init Functions
*******************************************************************************************/

		function init_Places ( ) {
			gArr_place = [
							new Obj_Place( "North Capitol Road", "North Capitol Road", "", null)							
						]; 
		}

		function init_Events () {
			var year = 2013;
			var month = 0;
			gArr_Date = [ new Date(year, month, 20), new Date(year, month, 21), new Date(year, month, 22) ];
	
			// 2012 Jan 20  :  idx 0
			var events = [
							new Obj_Event ( "4:30 pm" , "Opening Of Chopsticks Alley" , gIdx_pNorthCapitol , "A food walk and night market with colorful booths of delicious Chinese food, souvenirs, arts and crafts with live performances nightly." )
							, new Obj_Event ( "6:00 pm" , "Cultural Show",  gIdx_pNorthCapitol , "A cutural SHow featuring Chinese songs and dances.")
						];
			gArr_event.push(events);

			
			// 2012 Jan 21  :  idx 1
			events = [
							new Obj_Event ( "5:30 pm" , "2nd Opening Of Chopsticks Alley" , gIdx_pNorthCapitol , "2 A food walk and night market with colorful booths of delicious Chinese food, souvenirs, arts and crafts with live performances nightly." )
							, new Obj_Event ( "6:00 pm" , "2nd Cultural Show",  gIdx_pNorthCapitol , "2 A cutural SHow featuring Chinese songs and dances.")
						];
			gArr_event.push(events);

			
			// 2012 Jan 22  :  idx 2
			events = [
							new Obj_Event ( "6:30 pm" , "3rd Opening Of Chopsticks Alley" , gIdx_pNorthCapitol , "3 A food walk and night market with colorful booths of delicious Chinese food, souvenirs, arts and crafts with live performances nightly." )
							, new Obj_Event ( "8:00 pm" , "3rd Cultural Show",  gIdx_pNorthCapitol , "3 A cutural SHow featuring Chinese songs and dances.")
						];

			gArr_event.push(events);

		}


/******************************************************************************************
			
*******************************************************************************************/
		$(document).on('mobileinit', function() {
			$.mobile.defaultPageTransition = "none";
			
		});


		$(document).ready(function() {
			init_Places();
			init_Events();

		});

		$(document).on('pageinit', '#pSchedule', function() {
			gObj_Event = new Obj_EventUI();

	
			$("#pSchedule").on( "pageshow" , function( evt , ui ) {
				// Check previous Page
	
				var prePage = ui.prevPage.attr("id");

				if ( prePage == "pViewEvent") {

					gObj_ViewEvent = null;
				}

			});
		});	

		$(document).on('pageinit', '#pViewEvent', function() {
	
			gObj_ViewEvent.showPage();	

		});	




	</script>

	<script src="js/jquery.mobile-1.2.0.min.js"></script>
</head>
 
<body> 

<!-- Page Schedule -->
<div data-role="page" id="pSchedule">

	<div data-role="header"  data-position="fixed" data-tap-toggle="false"> 			
		<h1>Bacoloadiat 2013</h1>

		<div data-role="navbar">
		   <ul>
			 <li><a data-icon="grid" class="ui-btn-active ui-state-persist">Schedule</a></li>
			 <li><a href="#pVenues" data-icon="home" >Venues</a></li>
			 <li><a href="#pFavorite" data-icon="star" >Favorite</a></li>
			 <li><a href="#pInfo" data-icon="info" >Info</a></li>
		   </ul>
		</div>

	</div>  <!-- /header -->


	<div data-role="content">	

		<div> 
			<div class="ui-grid-b">
				<div class="ui-block-a">
					<span>
					<button data-mini="false" data-inline="true" data-icon="arrow-l"  data-theme="c" id="pScheLBtn">12</button>
					</span>
				</div>
				<div class="ui-block-b">

					<button data-rel="popup" data-role="button" data-mini="false" data-theme="a"  id="pScheCBtn">28 Oct</button>
					<div data-role="popup" id="popupSelDate">
						<ul data-role="listview" data-inset="true" data-theme="e">
						</ul>
					</div>

				</div>
				<div class="ui-block-c" style="text-align:right">
					<span>
						<button data-mini="false" data-inline="true" data-icon="arrow-r" data-iconpos="right" data-theme="c" id="pScheRBtn">29</button>
					</span>
				</div>
			</div>
		</div>
			

		
		<ul data-role="listview" data-inset="true" data-theme="c" id="pScheList">
		
		</ul>
		

	</div><!-- /content -->

</div><!-- /page -->


<!-- Page Venes -->
<div data-role="page" id="pVenues">

	<div data-role="header"  data-position="fixed" data-tap-toggle="false"> 			
		<h1>Bacoloadiat 2013</h1>

		<div data-role="navbar">
		   <ul>
			 <li><a href="#pSchedule" data-icon="grid">Schedule</a></li>
			 <li><a data-icon="home" class="ui-btn-active ui-state-persist">Venues</a></li>
			 <li><a href="#pFavorite" data-icon="star" >Favorite</a></li>
			 <li><a href="#pInfo" data-icon="info" >Info</a></li>
		   </ul>
		</div>

	</div>  <!-- /header -->


	<div data-role="content">	
		<p>Venues</p>		
	</div><!-- /content -->

</div><!-- /page -->

<!-- Page Favorite -->
<div data-role="page" id="pFavorite">

	<div data-role="header"  data-position="fixed" data-tap-toggle="false"> 			
		<h1>Bacoloadiat 2013</h1>

		<div data-role="navbar">
		   <ul>
			 <li><a href="#pSchedule" data-icon="grid">Schedule</a></li>
			 <li><a href="#pVenues" data-icon="home" >Venues</a></li>
			 <li><a data-icon="star" class="ui-btn-active ui-state-persist">Favorite</a></li>
			 <li><a href="#pInfo" data-icon="info" >Info</a></li>
		   </ul>
		</div>

	</div>  <!-- /header -->


	<div data-role="content">	
		<p>Favorite</p>		
	</div><!-- /content -->

</div><!-- /page -->


<!-- Page Info -->
<div data-role="page" id="pInfo">

	<div data-role="header"  data-position="fixed" data-tap-toggle="false"> 			
		<h1>Bacoloadiat 2013</h1>

		<div data-role="navbar">
		   <ul>
			 <li><a href="#pSchedule" data-icon="grid">Schedule</a></li>
			 <li><a href="#pVenues" data-icon="home" >Venues</a></li>
			 <li><a href="#pFavorite" data-icon="star" >Favorite</a></li>
			 <li><a data-icon="info" class="ui-btn-active ui-state-persist" >Info</a></li>
		   </ul>
		</div>

	</div>  <!-- /header -->


	<div data-role="content">	
		<p>Info</p>		
	</div><!-- /content -->

</div><!-- /page -->


</body>
</html>